---
- name: Bootstrap Python (Alpine)
  hosts: vps-alpine
  gather_facts: false
  tasks:
    - name: Install Python3 (Alpine)
      raw: |
        if [ "$(id -u)" -eq 0 ]; then
          apk add --no-cache python3
        else
          if sudo -n true 2>/dev/null; then
            sudo apk add --no-cache python3
          else
            echo "{{ ansible_password | default('') }}" | sudo -S apk add --no-cache python3
          fi
        fi
      register: bootstrap_alpine_result
      changed_when: "'Installing' in bootstrap_alpine_result.stdout"
- name: Bootstrap Python
  hosts: vps-debian
  gather_facts: false
  tasks:
    - name: Install Python3 (Debian)
      raw: |
        if [ "$(id -u)" -eq 0 ]; then
          apt update && apt install -y python3 python3-apt
        else
          if sudo -n true 2>/dev/null; then
            sudo apt update && sudo apt install -y python3 python3-apt
          else
            echo "{{ ansible_password | default('') }}" | sudo -S apt update && sudo apt install -y python3 python3-apt
          fi
        fi
      register: bootstrap_debian_result
      changed_when: "'Installing: 1' in bootstrap_debian_result.stdout"
- name: My first play
  hosts: vps
  tasks:
   - name: Ping my hosts
     ansible.builtin.ping:

   - name: Print message
     ansible.builtin.debug:
       msg: Hello world